- [x] test base
- [ ] test vhmm
    - [ ] implementation
        - [x] init
        - [x] config
        - [x] json
    - [ ] functionality
        - [ ] fit & predict "correctly"
        - [x] transition cost
        - [x] mapping
        - [x] mapper
        - [~] mapped prediction / couldn't test with predictions of more than one class

- [ ] 2 main struggle points:
    - [ ] MAPPING SHOULD HOLD TRUE OVER TIME
    - [ ] PROPERLY TESTING THE EMERGENCE OF NEW REGIMES

- [x] FIGURE OUT HOW TO CREATE TEST DATA THAT RESULTS IN REPEATABLE OUTCOMES
    - this was in response to weird outcomes using earthquake data
	  which turns out to be a numpy compatibility issue
    - just downgraded np

- [ ] test regime
    - [x] properties
        - [x] with no models
        - [x] with models
    - [x] getitem
    - [x] initial fit
        - [x] specified regime
        - [x] [specified regimes]
        - [x] -1
    - [ ] fit
	- [x] extend transmat
	- [x] extend startprob
	- [x] transition cost matrix
		- [x] n
		- [x] n+1
	- [x] transition cost total
	- [x] comparing cost
        - [x] keeping number of regimes
        - [x] adding regime
    - [x] computing transition threshold
        - [x] too little values
	    - [x] less than 8 values
        - [x] enough values
        - [x] setting and getting
    - [x] restoring
        - [x] with no models
        - [x] with models
	    - [x] n_components as a list
            - [x] with no previous models
            - [x] with previous models
	- [x] self.config works
    - **function tests**
        - [~] right regime detection
        - [x] right tracking of regimes
        - [ ] predict
            - [x] mapper is set
            - [x] mapper is correct
            - [ ] mapping is constant over many models
        - [ ] new regime
        - [ ] regime disappearing?
- [x] handle cost matrix being infeasible
    - an entire col being inf
- [x] ! train multiple models and use cheapest one
- [x] silhouette vs bic
    - bic tries to maximize number of regimes during initial fit
    - changing from bic to silhouette min fit makes no difference
- [x] scores over time
        - [x] bic
        - [ ] ~~aic~~
        - [x] silhouette
- [ ] serialize all instruments for M20
    - [x] should really be indexed on last saturday of month
    - do other ones later one
    - ~2 hours per
- [x] tests for time index
- [x] test for predict all
- [ ] hybrid sampling:
    - use all last $n$ samples
    - use time decay for all samples before $n$
- [x] test plotting
- [x] handle models raising during fit.
- [ ] speed up fitting
- [ ] split up fit into sub calls
- [ ] **test catastrophic fit failures**
	- [ ] initial fit
	- [ ] online fit
	- [ ] initial fit after online fit
- [ ] determine what state info of RegimeClassifier I want to write to file in regards to fault recovery
	- n_failed_fits?
	- name
